// Generated by CoffeeScript 1.10.0
(function() {
  var COMSpell, CodeSpell, Decoration,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  COMSpell = require("/vincent/com/spell");

  Decoration = require("/vincent/com/decoration");

  CodeSpell = (function(superClass) {
    var DM, dm, reg;

    extend(CodeSpell, superClass);

    reg = /`([^`\n\r]|\\`)*[^\\`\r\n]`/;

    DM = Decoration.createRegExpMaintainer("InlineCodeQuoteDecoration", /(?:^`)|(?:`$)/g, ["com-dec-hold"]);

    dm = new DM;

    CodeSpell.prototype.test = function(contentString) {
      var match;
      if (contentString == null) {
        contentString = "";
      }
      match = contentString.match(reg);
      if (match) {
        return {
          start: match.index,
          end: match.index + match[0].length,
          match: match
        };
      }
      return null;
    };

    function CodeSpell() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (this.appearance == null) {
        this.appearance = {
          tagName: "code",
          classList: ["com", "com-inline-code", "com-text"]
        };
      }
      CodeSpell.__super__.constructor.apply(this, args);
      this.addDecorationMaintainer(dm);
      this.setDecorations();
      this.decorationPolicy.behave({
        behavior: "singular"
      });
      this.rightCaretPriority = 1;
    }

    CodeSpell.prototype.type = "CodeSpell";

    CodeSpell.prototype.parse = function() {
      return null;
    };

    CodeSpell.prototype.render = function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      return CodeSpell.__super__.render.apply(this, args);
    };

    CodeSpell.prototype.compose = function() {
      var match;
      if (CodeSpell.__super__.compose.call(this)) {
        return true;
      }
      match = this.contentString.match(reg);
      if (!match || match.index !== 0 || match[0].length !== this.length) {
        this.toNormalTextInPlace();
        this.dirty = true;
        return true;
      }
      return false;
    };

    return CodeSpell;

  })(COMSpell);

  module.exports = CodeSpell;

}).call(this);
